<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Journal / Calendrier Interactif üìù</title>
    <style>
        /* --- CSS pour le style et l'organisation --- */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f4f7f6;
            color: #333;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        #app-container {
            width: 100%;
            max-width: 800px;
            background-color: #ffffff;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            padding: 30px;
        }

        h1 {
            color: #2a9d8f;
            text-align: center;
            margin-bottom: 20px;
        }

        /* --- Section de s√©lection de date --- */
        #date-selector {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 25px;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
            background-color: #e9f7f6;
        }

        #date-input {
            padding: 10px;
            font-size: 1.1em;
            border: 1px solid #ccc;
            border-radius: 5px;
            margin: 0 10px;
            flex-grow: 1;
        }

        /* --- Section de l'√©diteur de notes (rich text) --- */
        #editor-container {
            border: 1px solid #ccc;
            border-radius: 5px;
            overflow: hidden;
            margin-bottom: 20px;
        }

        #toolbar {
            background-color: #f0f0f0;
            padding: 8px;
            display: flex;
            gap: 5px;
            border-bottom: 1px solid #ccc;
        }

        .tool-button {
            padding: 8px 12px;
            border: none;
            background-color: #fff;
            color: #333;
            cursor: pointer;
            border-radius: 4px;
            font-weight: bold;
            transition: background-color 0.2s;
        }

        .tool-button:hover {
            background-color: #ddd;
        }
        
        /* Boutons sp√©cifiques */
        #bold-btn { font-weight: 900; }
        #strike-btn { text-decoration: line-through; }

        #notes-editor {
            min-height: 250px;
            padding: 15px;
            font-size: 1.1em;
            line-height: 1.6;
            outline: none;
            /* Rendre le contenu modifiable */
            contenteditable="true";
        }
        
        /* Style pour les cases √† cocher g√©n√©r√©es */
        #notes-editor input[type="checkbox"] {
            margin-right: 8px;
            transform: scale(1.2); /* Rendre les cases plus visibles */
            cursor: pointer;
        }
        
        /* Style pour le texte barr√© */
        #notes-editor strike {
            color: #888;
        }

        /* --- Bouton de sauvegarde/statut --- */
        #save-status {
            text-align: center;
            padding: 10px;
            background-color: #d1e7dd;
            color: #0f5132;
            border-radius: 5px;
            font-weight: bold;
        }

    </style>
</head>
<body>

<div id="app-container">
    <h1>üóìÔ∏è Mon Journal Quotidien</h1>
    
    <div id="date-selector">
        <label for="date-input">Jour s√©lectionn√© :</label>
        <input type="date" id="date-input">
    </div>

    <div id="editor-container">
        <div id="toolbar">
            <button class="tool-button" id="bold-btn" title="Mettre en gras" onclick="formatText('bold')">B</button>
            <button class="tool-button" id="strike-btn" title="Barrer le texte" onclick="formatText('strikeThrough')">S</button>
            <button class="tool-button" id="checkbox-btn" title="Ins√©rer une t√¢che/case √† cocher" onclick="insertCheckbox()">‚úÖ T√¢che</button>
        </div>
        
        <div id="notes-editor" contenteditable="true">
            S√©lectionnez une date pour commencer √† √©crire vos notes et vos t√¢ches !
        </div>
    </div>
    
    <div id="save-status">
        Sauvegarde automatique activ√©e (Local Storage).
    </div>
</div>

<script>
    // --- VARIABLES GLOBALES ---
    const dateInput = document.getElementById('date-input');
    const notesEditor = document.getElementById('notes-editor');
    const saveStatus = document.getElementById('save-status');
    
    let currentDateKey = ''; // Cl√© de sauvegarde bas√©e sur la date

    // --- FONCTIONS DE GESTION DE LA DATE ---

    /** Obtient la date du jour au format YYYY-MM-DD et l'applique √† l'input. */
    function setInitialDate() {
        const today = new Date();
        const yyyy = today.getFullYear();
        const mm = String(today.getMonth() + 1).padStart(2, '0'); // Mois est 0-index√©
        const dd = String(today.getDate()).padStart(2, '0');
        
        dateInput.value = `${yyyy}-${mm}-${dd}`;
        handleDateChange(); // Charger les notes pour cette date
    }

    /** G√®re le changement de date dans l'input. */
    function handleDateChange() {
        // Sauvegarder d'abord les notes de l'ancienne date
        if (currentDateKey) {
            saveNotes();
        }
        
        // D√©finir la nouvelle cl√© et charger
        currentDateKey = `journal_${dateInput.value}`;
        loadNotes();
    }

    // --- FONCTIONS DE SAUVEGARDE (Local Storage) ---

    /** Sauvegarde le contenu de l'√©diteur pour la date courante. */
    function saveNotes() {
        if (!currentDateKey) return;
        
        // Sauvegarder le contenu HTML riche
        localStorage.setItem(currentDateKey, notesEditor.innerHTML);
        
        // Afficher le statut de sauvegarde
        saveStatus.textContent = '‚úÖ Sauvegard√© automatiquement !';
        setTimeout(() => {
            saveStatus.textContent = 'Sauvegarde automatique activ√©e (Local Storage).';
        }, 2000);
    }

    /** Charge le contenu pour la date courante. */
    function loadNotes() {
        if (!currentDateKey) return;
        
        const savedContent = localStorage.getItem(currentDateKey);
        
        if (savedContent) {
            notesEditor.innerHTML = savedContent;
        } else {
            notesEditor.innerHTML = `<em>√âcrivez vos notes et t√¢ches pour le ${dateInput.value} ici...</em>`;
        }
    }

    // --- FONCTIONS DE FORMATAGE DE TEXTE ---

    /** Applique un formatage au texte s√©lectionn√© (gras, barr√©). */
    function formatText(command) {
        // document.execCommand est la m√©thode standard pour le formatage
        document.execCommand(command, false, null);
        notesEditor.focus(); // Remettre le focus sur l'√©diteur apr√®s l'op√©ration
        saveNotes(); // Sauvegarder apr√®s un changement de format
    }

    /** Ins√®re un √©l√©ment de case √† cocher. */
    function insertCheckbox() {
        // La case √† cocher est ins√©r√©e avec un <br> pour un nouveau paragraphe
        document.execCommand('insertHTML', false, '<input type="checkbox" onclick="saveNotes()"> T√¢che : &nbsp;');
        notesEditor.focus();
    }
    
    // --- INITIALISATION DU JEU ---

    function initJournal() {
        // 1. Initialiser la date sur le jour actuel
        setInitialDate(); 
        
        // 2. √âcouteurs d'√©v√©nements
        dateInput.addEventListener('change', handleDateChange);
        
        // 3. Sauvegarde automatique apr√®s chaque frappe ou modification
        notesEditor.addEventListener('input', saveNotes);
        
        // 4. Ajouter l'√©couteur pour les clics sur les cases √† cocher (car ils ne sont pas g√©r√©s par 'input')
        notesEditor.addEventListener('click', (event) => {
            if (event.target.type === 'checkbox') {
                saveNotes();
            }
        });
    }

    // D√©marrer l'application
    window.onload = initJournal;
</script>

</body>
</html>
