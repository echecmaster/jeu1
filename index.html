<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bamboo Clicker üéã</title>
    <style>
        /* --- Styles G√©n√©raux --- */
        body {
            font-family: 'Arial', sans-serif;
            background-color: #2c3e50; /* Fond sombre */
            color: #ecf0f1; /* Texte clair */
            margin: 0;
            padding: 0;
            overflow: hidden; /* Emp√™che le d√©filement */
            user-select: none; /* Emp√™che la s√©lection de texte */
        }

        /* --- Conteneur Principal --- */
        #game-container {
            display: flex;
            height: 100vh;
        }

        /* --- Section de Gauche (Clic) --- */
        #clicker-section {
            flex: 2; /* Prend 2/3 de la largeur */
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background-color: #34495e;
            padding: 20px;
            border-right: 4px solid #2c3e50;
        }

        #score-display {
            font-size: 4em;
            font-weight: bold;
        }

        #bps-display {
            font-size: 1.5em;
            color: #95a5a6;
            margin-top: -10px;
        }

        #bamboo-clicker {
            font-size: 15em; /* Emoji g√©ant */
            cursor: pointer;
            margin-top: 20px;
            transition: transform 0.05s ease;
        }

        /* Effet de clic */
        #bamboo-clicker:active {
            transform: scale(0.95);
        }

        /* --- Section de Droite (Boutique) --- */
        #store-section {
            flex: 1; /* Prend 1/3 de la largeur */
            background-color: #2c3e50;
            padding: 20px;
            overflow-y: auto; /* Permet de scroller si la boutique est grande */
        }

        #store-section h2 {
            text-align: center;
            border-bottom: 2px solid #34495e;
            padding-bottom: 10px;
        }

        .store-item {
            background-color: #34495e;
            border: 2px solid #4a6580;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 10px;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .store-item:hover:not(:disabled) {
            background-color: #4a6580;
        }

        /* Style pour les boutons d√©sactiv√©s */
        .store-item:disabled {
            background-color: #2a3a4a;
            color: #7f8c8d;
            cursor: not-allowed;
            border-color: #2a3a4a;
        }

        .item-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 1.1em;
        }

        .item-name {
            font-weight: bold;
        }

        .item-cost {
            font-weight: bold;
            color: #1abc9c; /* Vert */
        }

        .item-details {
            font-size: 0.9em;
            color: #bdc3c7;
            margin-top: 5px;
        }

        .item-count {
            font-size: 1.2em;
            font-weight: bold;
            color: #e67e22; /* Orange */
        }

        /* --- Boutons de Sauvegarde/Reset --- */
        #game-controls {
            margin-top: 20px;
            display: flex;
            justify-content: space-around;
        }

        #game-controls button {
            padding: 10px 15px;
            font-size: 1em;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
        }

        #save-button {
            background-color: #27ae60; /* Vert */
            color: white;
        }
        #save-button:hover {
            background-color: #2ecc71;
        }

        #reset-button {
            background-color: #c0392b; /* Rouge */
            color: white;
        }
        #reset-button:hover {
            background-color: #e74c3c;
        }
        
        /* Animation de feedback de clic */
        .click-feedback {
            position: absolute;
            font-size: 2em;
            color: #ecf0f1;
            opacity: 1;
            animation: fadeOutUp 1s forwards;
            pointer-events: none; /* N'intercepte pas les clics */
        }

        @keyframes fadeOutUp {
            from {
                opacity: 1;
                transform: translateY(0);
            }
            to {
                opacity: 0;
                transform: translateY(-50px);
            }
        }

    </style>
</head>
<body>

    <div id="game-container">
        
        <div id="clicker-section">
            <div id="score-container">
                <div id="score-display">0</div>
                <div id="bps-display">par seconde : 0</div>
            </div>
            <div id="bamboo-clicker">üéã</div>
        </div>

        <div id="store-section">
            <h2>Boutique</h2>

            <button class="store-item" id="buy-click-power">
                <div class="item-info">
                    <div>
                        <span class="item-name">Panda Travailleur</span>
                        <div class="item-details">+1 bambou par clic</div>
                    </div>
                    <div>
                        <span class="item-cost" id="click-power-cost">15</span> üéç
                    </div>
                </div>
                <div class="item-count" id="click-power-count">x0</div>
            </button>

            <button class="store-item" id="buy-auto-1">
                <div class="item-info">
                    <div>
                        <span class="item-name">Petit Bosquet</span>
                        <div class="item-details">+1 bambou par seconde</div>
                    </div>
                    <div>
                        <span class="item-cost" id="auto-1-cost">100</span> üéç
                    </div>
                </div>
                <div class="item-count" id="auto-1-count">x0</div>
            </button>

            <button class="store-item" id="buy-auto-2">
                <div class="item-info">
                    <div>
                        <span class="item-name">For√™t de Bambous</span>
                        <div class="item-details">+8 bambous par seconde</div>
                    </div>
                    <div>
                        <span class="item-cost" id="auto-2-cost">1100</span> üéç
                    </div>
                </div>
                <div class="item-count" id="auto-2-count">x0</div>
            </button>
            
            <button class="store-item" id="buy-auto-3">
                <div class="item-info">
                    <div>
                        <span class="item-name">Plantation Magique</span>
                        <div class="item-details">+47 bambous par seconde</div>
                    </div>
                    <div>
                        <span class="item-cost" id="auto-3-cost">12000</span> üéç
                    </div>
                </div>
                <div class="item-count" id="auto-3-count">x0</div>
            </button>
            
            <button class="store-item" id="buy-auto-4">
                <div class="item-info">
                    <div>
                        <span class="item-name">Dieu Panda</span>
                        <div class="item-details">+260 bambous par seconde</div>
                    </div>
                    <div>
                        <span class="item-cost" id="auto-4-cost">130000</span> üéç
                    </div>
                </div>
                <div class="item-count" id="auto-4-count">x0</div>
            </button>

            <div id="game-controls">
                <button id="save-button">Sauvegarder</button>
                <button id="reset-button">R√©initialiser</button>
            </div>

        </div>
    </div>

    <script>
        // Attend que le DOM soit charg√©
        document.addEventListener('DOMContentLoaded', () => {

            // --- VARIABLES PRINCIPALES DU JEU ---
            let bamboos = 0;
            let bamboosPerSecond = 0;
            let clickPower = 1;

            // --- STRUCTURES DES AM√âLIORATIONS ---
            // Utiliser des objets rend la gestion plus facile
            const upgrades = {
                clickPower: {
                    name: "Panda Travailleur",
                    cost: 15,
                    count: 0,
                    baseCost: 15,
                    power: 1
                },
                auto1: {
                    name: "Petit Bosquet",
                    cost: 100,
                    count: 0,
                    baseCost: 100,
                    bps: 1
                },
                auto2: {
                    name: "For√™t de Bambous",
                    cost: 1100,
                    count: 0,
                    baseCost: 1100,
                    bps: 8
                },
                auto3: {
                    name: "Plantation Magique",
                    cost: 12000,
                    count: 0,
                    baseCost: 12000,
                    bps: 47
                },
                auto4: {
                    name: "Dieu Panda",
                    cost: 130000,
                    count: 0,
                    baseCost: 130000,
                    bps: 260
                }
            };
            
            // --- R√âF√âRENCES DOM (pour √©viter de les chercher tout le temps) ---
            const bambooClicker = document.getElementById('bamboo-clicker');
            const scoreDisplay = document.getElementById('score-display');
            const bpsDisplay = document.getElementById('bps-display');
            
            const storeButtons = {
                clickPower: document.getElementById('buy-click-power'),
                auto1: document.getElementById('buy-auto-1'),
                auto2: document.getElementById('buy-auto-2'),
                auto3: document.getElementById('buy-auto-3'),
                auto4: document.getElementById('buy-auto-4'),
            };

            const costDisplays = {
                clickPower: document.getElementById('click-power-cost'),
                auto1: document.getElementById('auto-1-cost'),
                auto2: document.getElementById('auto-2-cost'),
                auto3: document.getElementById('auto-3-cost'),
                auto4: document.getElementById('auto-4-cost'),
            };

            const countDisplays = {
                clickPower: document.getElementById('click-power-count'),
                auto1: document.getElementById('auto-1-count'),
                auto2: document.getElementById('auto-2-count'),
                auto3: document.getElementById('auto-3-count'),
                auto4: document.getElementById('auto-4-count'),
            };

            const saveButton = document.getElementById('save-button');
            const resetButton = document.getElementById('reset-button');

            // --- FONCTIONS PRINCIPALES DU JEU ---

            /**
             * Appel√© √† chaque clic sur le bambou
             */
            function clickBamboo(event) {
                bamboos += clickPower;
                updateUI();
                
                // Cr√©er un feedback visuel de clic
                createClickFeedback(event.clientX, event.clientY);
            }

            /**
             * Cr√©e un "+1" (ou +clickPower) qui flotte vers le haut
             */
            function createClickFeedback(x, y) {
                const feedback = document.createElement('div');
                feedback.className = 'click-feedback';
                feedback.textContent = `+${clickPower}`;
                feedback.style.left = `${x - 15}px`; // Ajuste la position
                feedback.style.top = `${y - 30}px`;  // Ajuste la position
                
                document.body.appendChild(feedback);
                
                // Supprimer l'√©l√©ment apr√®s l'animation
                setTimeout(() => {
                    feedback.remove();
                }, 1000); // 1000ms = dur√©e de l'animation
            }

            /**
             * Fonction g√©n√©rique pour acheter une am√©lioration
             */
            function buyUpgrade(upgradeKey) {
                const upgrade = upgrades[upgradeKey];
                
                // V√©rifier si on a assez de bambous
                if (bamboos >= upgrade.cost) {
                    bamboos -= upgrade.cost; // Payer
                    upgrade.count++; // Augmenter le nombre
                    
                    // Augmenter le co√ªt pour le prochain achat (formule classique)
                    upgrade.cost = Math.ceil(upgrade.baseCost * Math.pow(1.15, upgrade.count));
                    
                    // Mettre √† jour les stats
                    recalculateStats();
                    updateUI();
                }
            }

            /**
             * Recalcule le BPS total et la puissance de clic
             */
            function recalculateStats() {
                // Puissance de clic
                clickPower = 1 + (upgrades.clickPower.count * upgrades.clickPower.power);
                
                // BPS
                bamboosPerSecond = 0; // Remettre √† z√©ro
                bamboosPerSecond += upgrades.auto1.count * upgrades.auto1.bps;
                bamboosPerSecond += upgrades.auto2.count * upgrades.auto2.bps;
                bamboosPerSecond += upgrades.auto3.count * upgrades.auto3.bps;
                bamboosPerSecond += upgrades.auto4.count * upgrades.auto4.bps;
            }

            /**
             * Met √† jour l'affichage (score, BPS, co√ªts, etc.)
             */
            function updateUI() {
                // Utilise toLocaleString pour formater les grands nombres (ex: 1 000 000)
                scoreDisplay.textContent = Math.floor(bamboos).toLocaleString('fr-FR');
                bpsDisplay.textContent = `par seconde : ${bamboosPerSecond.toLocaleString('fr-FR')}`;
                
                // Mettre √† jour tous les boutons de la boutique
                for (const key in upgrades) {
                    const upgrade = upgrades[key];
                    costDisplays[key].textContent = upgrade.cost.toLocaleString('fr-FR');
                    countDisplays[key].textContent = `x${upgrade.count}`;
                    
                    // Activer ou d√©sactiver le bouton
                    storeButtons[key].disabled = bamboos < upgrade.cost;
                }
            }

            /**
             * Boucle de jeu principale (s'ex√©cute toutes les secondes)
             */
            function gameLoop() {
                bamboos += bamboosPerSecond;
                updateUI();
            }

            // --- SAUVEGARDE & CHARGEMENT ---

            function saveGame() {
                const gameState = {
                    bamboos: bamboos,
                    upgrades: upgrades 
                };
                localStorage.setItem('bambooClickerSave', JSON.stringify(gameState));
                alert('Partie sauvegard√©e !');
            }

            function loadGame() {
                const savedState = localStorage.getItem('bambooClickerSave');
                if (savedState) {
                    const gameState = JSON.parse(savedState);
                    bamboos = gameState.bamboos;
                    
                    // Fusionner les donn√©es sauvegard√©es des am√©liorations
                    // (conserve les fonctions/r√©f√©rences DOM tout en chargeant les valeurs)
                    for (const key in gameState.upgrades) {
                        if (upgrades[key]) {
                            // On ne remplace que les donn√©es, pas l'objet entier
                            upgrades[key].cost = gameState.upgrades[key].cost;
                            upgrades[key].count = gameState.upgrades[key].count;
                        }
                    }
                    
                    recalculateStats();
                    updateUI();
                    console.log('Partie charg√©e.');
                }
            }

            function resetGame() {
                if (confirm('Es-tu s√ªr de vouloir r√©initialiser ? Toute ta progression sera perdue !')) {
                    localStorage.removeItem('bambooClickerSave');
                    location.reload(); // Recharge la page
                }
            }

            // --- D√âMARRAGE DU JEU ---
            
            // Attacher les √©couteurs d'√©v√©nements
            bambooClicker.addEventListener('click', clickBamboo);
            
            storeButtons.clickPower.addEventListener('click', () => buyUpgrade('clickPower'));
            storeButtons.auto1.addEventListener('click', () => buyUpgrade('auto1'));
            storeButtons.auto2.addEventListener('click', () => buyUpgrade('auto2'));
            storeButtons.auto3.addEventListener('click', () => buyUpgrade('auto3'));
            storeButtons.auto4.addEventListener('click', () => buyUpgrade('auto4'));
            
            saveButton.addEventListener('click', saveGame);
            resetButton.addEventListener('click', resetGame);

            // Charger la sauvegarde (s'il y en a une)
            loadGame();
            
            // Lancer la boucle de jeu (1000ms = 1 seconde)
            setInterval(gameLoop, 1000);
            
            // Mettre √† jour l'UI une premi√®re fois au chargement
            updateUI();
        });
    </script>

</body>
</html>
