<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crusher Clicker</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #222;
            color: #FFF;
            margin: 0;
            padding: 20px;
            text-align: center;
            user-select: none; /* Emp√™che de s√©lectionner le texte en cliquant vite */
        }

        h1 {
            color: #FFD700; /* Couleur or */
        }

        /* Conteneur principal qui s√©pare le jeu et la boutique */
        #game-container {
            display: flex;
            flex-wrap: wrap; /* Pour les petits √©crans */
            justify-content: center;
            gap: 40px;
        }

        /* Zone de clic (gauche) */
        #crusher-area {
            flex-basis: 400px;
            padding: 20px;
            background-color: #333;
            border-radius: 10px;
            position: relative; /* Pour les textes flottants */
            overflow: hidden; /* Cache les textes qui sortent */
        }

        /* Le rocher √† cliquer */
        #crush-target {
            font-size: 150px; /* Un gros emoji */
            cursor: pointer;
            transition: transform 0.05s ease;
        }

        /* Effet de "secousse" au clic */
        #crush-target:active {
            transform: scale(0.95);
        }

        #score-display {
            font-size: 2.5em;
            margin-top: 20px;
        }

        /* Boutique (droite) */
        #store-area {
            flex-basis: 300px;
            padding: 20px;
            background-color: #444;
            border-radius: 10px;
        }

        #store-area h2 {
            border-bottom: 2px solid #FFD700;
            padding-bottom: 10px;
        }

        /* Style des boutons d'am√©lioration */
        .upgrade-button {
            width: 100%;
            padding: 15px;
            margin-top: 10px;
            font-size: 1em;
            background-color: #55aaff;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .upgrade-button:hover:not(:disabled) {
            background-color: #77ccff;
        }

        /* Style quand un bouton n'est pas achetable */
        .upgrade-button:disabled {
            background-color: #555;
            color: #999;
            cursor: not-allowed;
        }

        /* Style pour les petits textes "+1" qui apparaissent */
        .floating-text {
            position: absolute;
            font-size: 1.5em;
            color: #FFD700;
            opacity: 1;
            animation: fadeOut 1s forwards;
            pointer-events: none; /* N'emp√™che pas de cliquer sur le rocher */
        }

        /* Animation du texte flottant */
        @keyframes fadeOut {
            to {
                transform: translateY(-50px);
                opacity: 0;
            }
        }
    </style>
</head>
<body>

    <h1>Crusher Clicker ü™®</h1>

    <div id="game-container">

        <div id="crusher-area">
            <h2>Cliquez sur le rocher !</h2>
            <div id="crush-target">ü™®</div>
            <div id="score-display">
                <span id="score">0</span> Fragments
            </div>
            <div id="fps-display">0 fragments / sec</div>
        </div>

        <div id="store-area">
            <h2>Boutique</h2>

            <button id="upgrade-click" class="upgrade-button">
                Meilleure Pioche (Co√ªt: 10)
                <span>+1 par clic</span>
            </button>

            <button id="upgrade-auto1" class="upgrade-button">
                Petite Foreuse (Co√ªt: 50)
                <span>+1 / sec</span>
            </button>
            
            <button id="upgrade-auto2" class="upgrade-button">
                Concasseur Auto (Co√ªt: 500)
                <span>+10 / sec</span>
            </button>
        </div>

    </div>

    <script>
        // --- Variables de l'√©tat du jeu ---
        let fragments = 0;
        let fragmentsPerClick = 1;
        let fragmentsPerSecond = 0;

        // --- Co√ªts initiaux des am√©liorations ---
        let clickUpgradeCost = 10;
        let auto1UpgradeCost = 50;
        let auto2UpgradeCost = 500;

        // --- R√©f√©rences aux √©l√©ments HTML ---
        const crushTarget = document.getElementById('crush-target');
        const scoreDisplay = document.getElementById('score');
        const fpsDisplay = document.getElementById('fps-display');
        const crusherArea = document.getElementById('crusher-area');

        const clickUpgradeBtn = document.getElementById('upgrade-click');
        const auto1UpgradeBtn = document.getElementById('upgrade-auto1');
        const auto2UpgradeBtn = document.getElementById('upgrade-auto2');

        // --- Fonctions principales du jeu ---

        /**
         * Appel√© √† chaque clic sur le rocher
         */
        function crushRock(event) {
            fragments += fragmentsPerClick;
            updateUI();
            showFloatingText(event);
        }

        /**
         * Affiche le texte flottant "+X" lors d'un clic
         */
        function showFloatingText(event) {
            const text = document.createElement('div');
            text.textContent = `+${fragmentsPerClick}`;
            text.className = 'floating-text';
            
            // Positionne le texte l√† o√π l'utilisateur a cliqu√©
            text.style.left = `${event.clientX - crusherArea.getBoundingClientRect().left}px`;
            text.style.top = `${event.clientY - crusherArea.getBoundingClientRect().top}px`;

            crusherArea.appendChild(text);

            // Supprime l'√©l√©ment apr√®s l'animation
            setTimeout(() => {
                text.remove();
            }, 1000);
        }

        /**
         * G√®re l'achat de l'am√©lioration du clic
         */
        function buyClickUpgrade() {
            if (fragments >= clickUpgradeCost) {
                fragments -= clickUpgradeCost;      // Payer le co√ªt
                fragmentsPerClick += 1;             // Augmenter le gain par clic
                clickUpgradeCost = Math.ceil(clickUpgradeCost * 1.25); // Augmenter le co√ªt
                updateUI();
            }
        }

        /**
         * G√®re l'achat de la "Petite Foreuse"
         */
        function buyAuto1Upgrade() {
            if (fragments >= auto1UpgradeCost) {
                fragments -= auto1UpgradeCost;
                fragmentsPerSecond += 1;            // Augmenter le gain passif
                auto1UpgradeCost = Math.ceil(auto1UpgradeCost * 1.3);
                updateUI();
            }
        }

        /**
         * G√®re l'achat du "Concasseur Auto"
         */
        function buyAuto2Upgrade() {
            if (fragments >= auto2UpgradeCost) {
                fragments -= auto2UpgradeCost;
                fragmentsPerSecond += 10;           // Augmenter le gain passif (plus fort)
                auto2UpgradeCost = Math.ceil(auto2UpgradeCost * 1.4);
                updateUI();
            }
        }

        /**
         * Ajoute les fragments passifs (par seconde)
         */
        function applyPassiveIncome() {
            fragments += fragmentsPerSecond;
            updateUI();
        }

        /**
         * Met √† jour TOUTE l'interface utilisateur (scores, boutons)
         */
        function updateUI() {
            // Met √† jour les scores
            scoreDisplay.textContent = Math.floor(fragments); // Math.floor pour √©viter les d√©cimales
            fpsDisplay.textContent = `${fragmentsPerSecond} fragments / sec`;

            // Met √† jour le texte et l'√©tat des boutons
            clickUpgradeBtn.innerHTML = `Meilleure Pioche (Co√ªt: ${clickUpgradeCost}) <span>+${fragmentsPerClick + 1} par clic</span>`;
            auto1UpgradeBtn.innerHTML = `Petite Foreuse (Co√ªt: ${auto1UpgradeCost}) <span>+1 / sec</span>`;
            auto2UpgradeBtn.innerHTML = `Concasseur Auto (Co√ªt: ${auto2UpgradeCost}) <span>+10 / sec</span>`;

            // Active/D√©sactive les boutons si on n'a pas assez d'argent
            clickUpgradeBtn.disabled = fragments < clickUpgradeCost;
            auto1UpgradeBtn.disabled = fragments < auto1UpgradeCost;
            auto2UpgradeBtn.disabled = fragments < auto2UpgradeCost;
        }


        // --- √âcouteurs d'√©v√©nements (Lancement du jeu) ---

        crushTarget.addEventListener('click', crushRock);
        clickUpgradeBtn.addEventListener('click', buyClickUpgrade);
        auto1UpgradeBtn.addEventListener('click', buyAuto1Upgrade);
        auto2UpgradeBtn.addEventListener('click', buyAuto2Upgrade);

        // Boucle de jeu principale (pour le revenu passif)
        setInterval(applyPassiveIncome, 1000); // 1000ms = 1 seconde

        // Met √† jour l'interface une premi√®re fois au chargement
        updateUI();

    </script>

</body>
</html>
