<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bamboo Clicker üéã (Responsive)</title>
    <style>
        /* --- Styles G√©n√©raux --- */
        body {
            font-family: 'Arial', sans-serif;
            background-color: #111; /* Fond noir (tr√®s sombre) */
            color: #FFF; /* Texte blanc */
            margin: 0;
            padding: 0;
            user-select: none; /* Emp√™che la s√©lection de texte */
        }

        /* --- Conteneur Principal (Mobile d'abord) --- */
        #game-container {
            display: flex;
            flex-direction: column; /* Empil√© verticalement sur mobile */
            height: 100vh; /* Pleine hauteur de l'√©cran */
        }

        /* --- Section de Gauche (Clic) --- */
        #clicker-section {
            height: 50vh; /* 50% de la hauteur sur mobile */
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background-color: #000; /* Panneau noir */
            padding: 20px;
            box-sizing: border-box; /* Inclut padding dans la hauteur */
            border-bottom: 4px solid #111;
        }

        #score-display {
            font-size: 3em; /* Plus petit sur mobile */
            font-weight: bold;
            color: #FFF; /* Blanc */
        }

        #bps-display {
            font-size: 1.2em; /* Plus petit sur mobile */
            color: #4CAF50; /* Vert */
            margin-top: -5px;
        }

        #bamboo-clicker {
            font-size: 10em; /* Taille d'emoji pour mobile */
            cursor: pointer;
            margin-top: 20px;
            transition: transform 0.05s ease;
        }

        #bamboo-clicker:active {
            transform: scale(0.95);
        }

        /* --- Section de Droite (Boutique) --- */
        #store-section {
            height: 50vh; /* 50% de la hauteur sur mobile */
            background-color: #000; /* Panneau noir */
            padding: 20px;
            overflow-y: auto; /* Permet de scroller la boutique */
            box-sizing: border-box; /* Inclut padding dans la hauteur */
        }

        #store-section h2 {
            text-align: center;
            border-bottom: 2px solid #4CAF50; /* Ligne verte */
            padding-bottom: 10px;
            margin-top: 0;
        }

        .store-item {
            background-color: #1a1a1a; /* Fond d'item (noir l√©ger) */
            border: 2px solid #4CAF50; /* Bordure verte */
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 10px;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .store-item:hover:not(:disabled) {
            background-color: #2a2a2a;
        }

        .store-item:disabled {
            background-color: #111;
            color: #555;
            cursor: not-allowed;
            border-color: #111;
        }

        .item-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 1.1em;
        }

        .item-name {
            font-weight: bold;
            color: #FFF; /* Blanc */
        }

        .item-cost {
            font-weight: bold;
            color: #FFC107; /* Jaune */
        }

        .item-details {
            font-size: 0.9em;
            color: #AAA; /* Blanc cass√© */
            margin-top: 5px;
        }

        .item-count {
            font-size: 1.2em;
            font-weight: bold;
            color: #FFC107; /* Jaune */
        }

        /* --- Boutons de Sauvegarde/Reset --- */
        #game-controls {
            margin-top: 20px;
            display: flex;
            justify-content: space-around;
        }

        #game-controls button {
            padding: 10px 15px;
            font-size: 1em;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            color: #000; /* Texte noir sur boutons */
        }

        #save-button {
            background-color: #4CAF50; /* Vert */
        }
        #save-button:hover {
            background-color: #66BB6A;
        }

        #reset-button {
            background-color: #FFC107; /* Jaune (remplace le rouge) */
        }
        #reset-button:hover {
            background-color: #FFD54F;
        }
        
        /* Animation de feedback de clic */
        .click-feedback {
            position: absolute;
            font-size: 2em;
            color: #FFF; /* Texte flottant blanc */
            opacity: 1;
            animation: fadeOutUp 1s forwards;
            pointer-events: none;
        }

        @keyframes fadeOutUp {
            from { opacity: 1; transform: translateY(0); }
            to { opacity: 0; transform: translateY(-50px); }
        }

        /*
         * ======================================
         * MEDIA QUERY (POUR ORDINATEUR)
         * ======================================
         * Si l'√©cran est plus large que 768px...
        */
        @media (min-width: 768px) {
            #game-container {
                flex-direction: row; /* On repasse en mode horizontal */
            }

            #clicker-section {
                flex: 2; /* 2/3 de la largeur */
                height: 100vh; /* Pleine hauteur */
                border-bottom: none; /* On enl√®ve la bordure du bas */
                border-right: 4px solid #111; /* On met celle de droite */
            }
            
            #store-section {
                flex: 1; /* 1/3 de la largeur */
                height: 100vh; /* Pleine hauteur */
            }

            /* On agrandit les textes pour le confort sur PC */
            #score-display {
                font-size: 4em;
            }
            #bps-display {
                font-size: 1.5em;
            }
            #bamboo-clicker {
                font-size: 15em; /* Emoji g√©ant */
            }
        }

    </style>
</head>
<body>

    <div id="game-container">
        
        <div id="clicker-section">
            <div id="score-container">
                <div id="score-display">0</div>
                <div id="bps-display">par seconde : 0</div>
            </div>
            <div id="bamboo-clicker">üéã</div>
        </div>

        <div id="store-section">
            <h2>Boutique</h2>

            <button class="store-item" id="buy-click-power">
                <div class="item-info">
                    <div>
                        <span class="item-name">Panda Travailleur</span>
                        <div class="item-details">+1 bambou par clic</div>
                    </div>
                    <div>
                        <span class="item-cost" id="click-power-cost">15</span> üéç
                    </div>
                </div>
                <div class="item-count" id="click-power-count">x0</div>
            </button>

            <button class="store-item" id="buy-auto-1">
                <div class="item-info">
                    <div>
                        <span class="item-name">Petit Bosquet</span>
                        <div class="item-details">+1 bambou par seconde</div>
                    </div>
                    <div>
                        <span class="item-cost" id="auto-1-cost">100</span> üéç
                    </div>
                </div>
                <div class="item-count" id="auto-1-count">x0</div>
            </button>

            <button class="store-item" id="buy-auto-2">
                <div class="item-info">
                    <div>
                        <span class="item-name">For√™t de Bambous</span>
                        <div class="item-details">+8 bambous par seconde</div>
                    </div>
                    <div>
                        <span class="item-cost" id="auto-2-cost">1100</span> üéç
                    </div>
                </div>
                <div class="item-count" id="auto-2-count">x0</div>
            </button>
            
            <button class="store-item" id="buy-auto-3">
                <div class="item-info">
                    <div>
                        <span class="item-name">Plantation Magique</span>
                        <div class="item-details">+47 bambous par seconde</div>
                    </div>
                    <div>
                        <span class="item-cost" id="auto-3-cost">12000</span> üéç
                    </div>
                </div>
                <div class="item-count" id="auto-3-count">x0</div>
            </button>
            
            <button class="store-item" id="buy-auto-4">
                <div class="item-info">
                    <div>
                        <span class="item-name">Dieu Panda</span>
                        <div class="item-details">+260 bambous par seconde</div>
                    </div>
                    <div>
                        <span class="item-cost" id="auto-4-cost">130000</span> üéç
                    </div>
                </div>
                <div class="item-count" id="auto-4-count">x0</div>
            </button>

            <div id="game-controls">
                <button id="save-button">Sauvegarder</button>
                <button id="reset-button">R√©initialiser</button>
            </div>

        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {

            // --- VARIABLES PRINCIPALES DU JEU ---
            let bamboos = 0;
            let bamboosPerSecond = 0;
            let clickPower = 1;

            // --- STRUCTURES DES AM√âLIORATIONS ---
            const upgrades = {
                clickPower: {
                    name: "Panda Travailleur",
                    cost: 15,
                    count: 0,
                    baseCost: 15,
                    power: 1
                },
                auto1: {
                    name: "Petit Bosquet",
                    cost: 100,
                    count: 0,
                    baseCost: 100,
                    bps: 1
                },
                auto2: {
                    name: "For√™t de Bambous",
                    cost: 1100,
                    count: 0,
                    baseCost: 1100,
                    bps: 8
                },
                auto3: {
                    name: "Plantation Magique",
                    cost: 12000,
                    count: 0,
                    baseCost: 12000,
                    bps: 47
                },
                auto4: {
                    name: "Dieu Panda",
                    cost: 130000,
                    count: 0,
                    baseCost: 130000,
                    bps: 260
                }
            };
            
            // --- R√âF√âRENCES DOM ---
            const bambooClicker = document.getElementById('bamboo-clicker');
            const scoreDisplay = document.getElementById('score-display');
            const bpsDisplay = document.getElementById('bps-display');
            
            const storeButtons = {
                clickPower: document.getElementById('buy-click-power'),
                auto1: document.getElementById('buy-auto-1'),
                auto2: document.getElementById('buy-auto-2'),
                auto3: document.getElementById('buy-auto-3'),
                auto4: document.getElementById('buy-auto-4'),
            };

            const costDisplays = {
                clickPower: document.getElementById('click-power-cost'),
                auto1: document.getElementById('auto-1-cost'),
                auto2: document.getElementById('auto-2-cost'),
                auto3: document.getElementById('auto-3-cost'),
                auto4: document.getElementById('auto-4-cost'),
            };

            const countDisplays = {
                clickPower: document.getElementById('click-power-count'),
                auto1: document.getElementById('auto-1-count'),
                auto2: document.getElementById('auto-2-count'),
                auto3: document.getElementById('auto-3-count'),
                auto4: document.getElementById('auto-4-count'),
            };

            const saveButton = document.getElementById('save-button');
            const resetButton = document.getElementById('reset-button');

            // --- FONCTIONS PRINCIPALES DU JEU ---

            function clickBamboo(event) {
                bamboos += clickPower;
                updateUI();
                
                // G√®re le feedback visuel (position diff√©rente si tactile ou souris)
                let x, y;
                if (event.type === 'touchstart') {
                    x = event.touches[0].clientX;
                    y = event.touches[0].clientY;
                } else {
                    x = event.clientX;
                    y = event.clientY;
                }
                createClickFeedback(x, y);
            }

            function createClickFeedback(x, y) {
                const feedback = document.createElement('div');
                feedback.className = 'click-feedback';
                feedback.textContent = `+${clickPower}`;
                feedback.style.left = `${x - 15}px`;
                feedback.style.top = `${y - 30}px`; 
                document.body.appendChild(feedback);
                setTimeout(() => { feedback.remove(); }, 1000);
            }

            function buyUpgrade(upgradeKey) {
                const upgrade = upgrades[upgradeKey];
                if (bamboos >= upgrade.cost) {
                    bamboos -= upgrade.cost;
                    upgrade.count++;
                    upgrade.cost = Math.ceil(upgrade.baseCost * Math.pow(1.15, upgrade.count));
                    recalculateStats();
                    updateUI();
                }
            }

            function recalculateStats() {
                clickPower = 1 + (upgrades.clickPower.count * upgrades.clickPower.power);
                
                bamboosPerSecond = 0;
                bamboosPerSecond += upgrades.auto1.count * upgrades.auto1.bps;
                bamboosPerSecond += upgrades.auto2.count * upgrades.auto2.bps;
                bamboosPerSecond += upgrades.auto3.count * upgrades.auto3.bps;
                bamboosPerSecond += upgrades.auto4.count * upgrades.auto4.bps;
            }

            function updateUI() {
                scoreDisplay.textContent = Math.floor(bamboos).toLocaleString('fr-FR');
                bpsDisplay.textContent = `par seconde : ${bamboosPerSecond.toLocaleString('fr-FR')}`;
                
                for (const key in upgrades) {
                    const upgrade = upgrades[key];
                    costDisplays[key].textContent = upgrade.cost.toLocaleString('fr-FR');
                    countDisplays[key].textContent = `x${upgrade.count}`;
                    storeButtons[key].disabled = bamboos < upgrade.cost;
                }
            }

            function gameLoop() {
                bamboos += bamboosPerSecond;
                updateUI();
            }

            // --- SAUVEGARDE & CHARGEMENT ---
            function saveGame() {
                const gameState = { bamboos: bamboos, upgrades: upgrades };
                localStorage.setItem('bambooClickerSave', JSON.stringify(gameState));
                alert('Partie sauvegard√©e !');
            }

            function loadGame() {
                const savedState = localStorage.getItem('bambooClickerSave');
                if (savedState) {
                    const gameState = JSON.parse(savedState);
                    bamboos = gameState.bamboos;
                    for (const key in gameState.upgrades) {
                        if (upgrades[key]) {
                            upgrades[key].cost = gameState.upgrades[key].cost;
                            upgrades[key].count = gameState.upgrades[key].count;
                        }
                    }
                    recalculateStats();
                    updateUI();
                    console.log('Partie charg√©e.');
                }
            }

            function resetGame() {
                if (confirm('Es-tu s√ªr de vouloir r√©initialiser ? Toute ta progression sera perdue !')) {
                    localStorage.removeItem('bambooClickerSave');
                    location.reload();
                }
            }

            // --- D√âMARRAGE DU JEU ---
            bambooClicker.addEventListener('click', clickBamboo);
            // Ajout du support tactile
            bambooClicker.addEventListener('touchstart', (e) => {
                e.preventDefault(); // Emp√™che le "zoom" ou "clic fant√¥me"
                clickBamboo(e);
            }, { passive: false });
            
            storeButtons.clickPower.addEventListener('click', () => buyUpgrade('clickPower'));
            storeButtons.auto1.addEventListener('click', () => buyUpgrade('auto1'));
            storeButtons.auto2.addEventListener('click', () => buyUpgrade('auto2'));
            storeButtons.auto3.addEventListener('click', () => buyUpgrade('auto3'));
            storeButtons.auto4.addEventListener('click', () => buyUpgrade('auto4'));
            
            saveButton.addEventListener('click', saveGame);
            resetButton.addEventListener('click', resetGame);

            loadGame();
            setInterval(gameLoop, 1000);
            updateUI();
        });
    </script>

</body>
</html>
